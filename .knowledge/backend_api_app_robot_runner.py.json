{"is_source_file": true, "format": "Python", "description": "This file defines a Python module for managing and executing Robot Framework test runs, including functions for loading settings, constructing commands, and a RobotRunner class that runs tests in a background thread, streams output, and updates shared state.", "external_files": ["app.state_manager"], "external_methods": ["StateManager.mark_started", "StateManager.set_artifacts", "StateManager.append_log", "StateManager.set_status", "StateManager.set_progress", "StateManager.mark_finished"], "published": ["RobotRunner"], "classes": [{"name": "RobotRunner", "description": "A class responsible for executing Robot Framework tests asynchronously, streaming output, and updating shared session states."}], "methods": [{"name": "Dict _load_robot_settings(config_folder: Optional[str])", "description": "Loads robot variables from a YAML configuration file located within a specified folder.", "scope": "", "scopeKind": ""}, {"name": "str _ensure_output_dir(project: str)", "description": "Creates and returns the path to the output directory based on project name and timestamp.", "scope": "", "scopeKind": ""}, {"name": "List[str] _build_robot_command( tests_root: str, test_name: Optional[str], test_cases: Optional[List[str]], output_dir: str, robot_vars: Dict, )", "description": "Constructs the command line argument list to run Robot Framework tests with specified parameters.", "scope": "", "scopeKind": ""}, {"name": "Iterable[str] _iter_stream(stream: Iterable[bytes])", "description": "Iterates over a byte stream, decoding each line with fallback encoding strategies.", "scope": "", "scopeKind": ""}, {"name": "None start( self, session_id: str, *, project: str, tests_root: str, test_name: Optional[str] = None, test_cases: Optional[List[str]] = None, config_folder: Optional[str] = None, extra_args: Optional[Dict] = None, )", "description": "Starts an asynchronous Robot Framework test run in a background thread, setting up output directories and logging.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None request_stop(self, session_id: str)", "description": "Placeholder method to request stopping a running session (not yet implemented).", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None _run_worker(self, session_id: str, cmd: List[str], cwd: Optional[str])", "description": "Internal method that manages the execution of the robot process, logs output, detects test results, updates progress, and marks the session as finished.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None __init__(self, state: StateManager)", "scope": "RobotRunner", "scopeKind": "class", "description": "unavailable"}], "calls": ["subprocess.Popen", "_load_robot_settings", "_build_robot_command", "_iter_stream"], "search-terms": ["RobotRunner", "robot settings", "robot framework", "session management", "test execution", "background thread", "subprocess", "yaml configuration", "output directory", "test progress", "stream processing"], "state": 2, "file_id": 16, "knowledge_revision": 57, "git_revision": "", "revision_history": [{"39": ""}, {"53": ""}, {"55": ""}, {"56": ""}, {"57": ""}], "ctags": [{"_type": "tag", "name": "RobotRunner", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^class RobotRunner:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def __init__(self, state: StateManager) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, state: StateManager)", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_build_robot_command", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _build_robot_command($/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "( tests_root: str, test_name: Optional[str], test_cases: Optional[List[str]], output_dir: str, robot_vars: Dict, )"}, {"_type": "tag", "name": "_ensure_output_dir", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _ensure_output_dir(project: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(project: str)"}, {"_type": "tag", "name": "_iter_stream", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _iter_stream(stream: Iterable[bytes]) -> Iterable[str]:$/", "language": "Python", "typeref": "typename:Iterable[str]", "kind": "function", "signature": "(stream: Iterable[bytes])"}, {"_type": "tag", "name": "_load_robot_settings", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _load_robot_settings(config_folder: Optional[str]) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(config_folder: Optional[str])"}, {"_type": "tag", "name": "_run_worker", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def _run_worker(self, session_id: str, cmd: List[str], cwd: Optional[str]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, cmd: List[str], cwd: Optional[str])", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "request_stop", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def request_stop(self, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str)", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def start($/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "( self, session_id: str, *, project: str, tests_root: str, test_name: Optional[str] = None, test_cases: Optional[List[str]] = None, config_folder: Optional[str] = None, extra_args: Optional[Dict] = None, )", "scope": "RobotRunner", "scopeKind": "class"}], "hash": "5b7bc054b4d5550ff3f2883cc856b742", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/app/robot_runner.py"}