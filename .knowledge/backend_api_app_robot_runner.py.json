{"is_source_file": true, "format": "Python", "description": "This is a Python source file defining a class RobotRunner that manages execution of Robot Framework tests, including starting runs in background threads, processing output logs, detecting test results, and updating a shared StateManager object.", "external_files": ["app.state_manager"], "external_methods": ["StateManager.set_ui_lock", "StateManager.mark_started", "StateManager.set_artifacts", "StateManager.append_log", "StateManager.set_status", "StateManager.set_current_case", "StateManager.set_case_result", "StateManager.set_progress", "StateManager.mark_finished"], "published": ["RobotRunner"], "classes": [{"name": "RobotRunner", "description": "Responsible for executing Robot Framework tests via subprocess, streaming output, detecting test outcomes, and interfacing with a shared state management system."}], "methods": [{"name": "None __init__(self, state: StateManager)", "description": "Initializes the RobotRunner with a shared StateManager object.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None start( self, session_id: str, *, project: str, tests_root: str, test_name: Optional[str] = None, test_cases: Optional[List[str]] = None, config_folder: Optional[str] = None, extra_args: Optional[Dict] = None, )", "description": "Begins an asynchronous Robot Framework test run in a separate thread, setting up output directories, loading settings, and configuring the command.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None request_stop(self, session_id: str)", "description": "Requests stopping a running test session, currently only logs a warning.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None _run_worker(self, session_id: str, cmd: List[str], cwd: Optional[str])", "description": "Handles the actual execution of the Robot Framework process, processes stdout lines, detects test start and result lines, updates the shared state, and handles process completion.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "List[str] _build_robot_command( tests_root: str, test_name: Optional[str], test_cases: Optional[List[str]], output_dir: str, robot_vars: Dict, )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _ensure_output_dir(project: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Iterable[str] _iter_stream(stream: Iterable[bytes])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict _load_robot_settings(config_folder: Optional[str])", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["subprocess.Popen", "os.path.isfile", "yaml.safe_load", "os.makedirs", "os.path.join", "os.path.abspath", "time.strftime", "time.localtime", "self.state.set_ui_lock", "self.state.mark_started", "self.state.set_artifacts", "self.state.append_log", "self.state.set_status", "self.state.set_current_case", "self.state.set_case_result", "self.state.set_progress", "self.state.mark_finished", "_load_robot_settings", "_build_robot_command", "_iter_stream"], "search-terms": ["RobotRunner", "start", "subprocess", "threading", "yaml", "load_robot_settings", "build_robot_command", "stream processing", "test result detection"], "state": 2, "file_id": 16, "knowledge_revision": 67, "git_revision": "4aa558bba659727063461ed9b32896bf0335431e", "revision_history": [{"39": ""}, {"53": ""}, {"55": ""}, {"56": ""}, {"57": ""}, {"58": "4aa558bba659727063461ed9b32896bf0335431e"}, {"67": "4aa558bba659727063461ed9b32896bf0335431e"}], "ctags": [{"_type": "tag", "name": "RobotRunner", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^class RobotRunner:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def __init__(self, state: StateManager) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, state: StateManager)", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_build_robot_command", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _build_robot_command($/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "( tests_root: str, test_name: Optional[str], test_cases: Optional[List[str]], output_dir: str, robot_vars: Dict, )"}, {"_type": "tag", "name": "_ensure_output_dir", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _ensure_output_dir(project: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(project: str)"}, {"_type": "tag", "name": "_iter_stream", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _iter_stream(stream: Iterable[bytes]) -> Iterable[str]:$/", "language": "Python", "typeref": "typename:Iterable[str]", "kind": "function", "signature": "(stream: Iterable[bytes])"}, {"_type": "tag", "name": "_load_robot_settings", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _load_robot_settings(config_folder: Optional[str]) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(config_folder: Optional[str])"}, {"_type": "tag", "name": "_run_worker", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def _run_worker(self, session_id: str, cmd: List[str], cwd: Optional[str]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, cmd: List[str], cwd: Optional[str])", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "request_stop", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def request_stop(self, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str)", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def start($/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "( self, session_id: str, *, project: str, tests_root: str, test_name: Optional[str] = None, test_cases: Optional[List[str]] = None, config_folder: Optional[str] = None, extra_args: Optional[Dict] = None, )", "scope": "RobotRunner", "scopeKind": "class"}], "hash": "65b875362d8012b6e681e4bbd478051c", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/app/robot_runner.py"}