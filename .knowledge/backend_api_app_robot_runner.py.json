{"is_source_file": true, "format": "Python", "description": "This file defines a Python module for executing Robot Framework tests asynchronously. It includes functions for loading settings, building commands, managing output directories, and a class 'RobotRunner' that handles starting, monitoring, and logging the execution of Robot Framework tests via subprocesses. It interacts with a 'StateManager' to track session status, progress, and results.", "external_files": ["app.state_manager"], "external_methods": ["StateManager.mark_started", "StateManager.set_artifacts", "StateManager.append_log", "StateManager.set_status", "StateManager.set_progress", "StateManager.mark_finished"], "published": ["RobotRunner"], "classes": [{"name": "RobotRunner", "description": "Responsible for executing Robot Framework tests asynchronously and managing their lifecycle, progress, and results."}], "methods": [{"name": "Dict _load_robot_settings(config_folder: Optional[str])", "description": "Loads Robot Framework variables from YAML configuration files located in the provided folder.", "scope": "", "scopeKind": ""}, {"name": "str _ensure_output_dir(project: str)", "description": "Creates an organized output directory structure based on project name and timestamp.", "scope": "", "scopeKind": ""}, {"name": "List[str] _build_robot_command( tests_root: str, test_name: Optional[str], test_cases: Optional[List[str]], output_dir: str, robot_vars: Dict, )", "description": "Constructs the command line argument list to run Robot Framework with specified parameters.", "scope": "", "scopeKind": ""}, {"name": "Iterable[str] _iter_stream(stream: Iterable[bytes])", "description": "Iterates over a bytes stream, decoding lines with fallback mechanisms.", "scope": "", "scopeKind": ""}, {"name": "None start( self, session_id: str, *, project: str, tests_root: str, test_name: Optional[str] = None, test_cases: Optional[List[str]] = None, config_folder: Optional[str] = None, extra_args: Optional[Dict] = None, )", "description": "Begins executing Robot Framework tests asynchronously in a new thread, setting up environment and logging.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None request_stop(self, session_id: str)", "description": "Placeholder method for stopping a running test session; currently only logs a warning.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None _run_worker(self, session_id: str, cmd: List[str], cwd: Optional[str])", "description": "Internal method that runs the Robot process, streams output, detects test results, and updates session state.", "scope": "RobotRunner", "scopeKind": "class"}, {"name": "None __init__(self, state: StateManager)", "scope": "RobotRunner", "scopeKind": "class", "description": "unavailable"}], "calls": ["subprocess.Popen", "time.strftime", "os.path.join", "os.path.isdir", "os.makedirs", "yaml.safe_load", "sys.executable", "threading.Thread"], "search-terms": ["RobotRunner", "robot framework", "subprocess", "session management", "async test execution", "yaml configuration", "output directory", "test progress", "state manager", "test logs"], "state": 2, "file_id": 16, "knowledge_revision": 58, "git_revision": "4aa558bba659727063461ed9b32896bf0335431e", "revision_history": [{"39": ""}, {"53": ""}, {"55": ""}, {"56": ""}, {"57": ""}, {"58": "4aa558bba659727063461ed9b32896bf0335431e"}], "ctags": [{"_type": "tag", "name": "RobotRunner", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^class RobotRunner:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def __init__(self, state: StateManager) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, state: StateManager)", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_build_robot_command", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _build_robot_command($/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "( tests_root: str, test_name: Optional[str], test_cases: Optional[List[str]], output_dir: str, robot_vars: Dict, )"}, {"_type": "tag", "name": "_ensure_output_dir", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _ensure_output_dir(project: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(project: str)"}, {"_type": "tag", "name": "_iter_stream", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _iter_stream(stream: Iterable[bytes]) -> Iterable[str]:$/", "language": "Python", "typeref": "typename:Iterable[str]", "kind": "function", "signature": "(stream: Iterable[bytes])"}, {"_type": "tag", "name": "_load_robot_settings", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^def _load_robot_settings(config_folder: Optional[str]) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(config_folder: Optional[str])"}, {"_type": "tag", "name": "_run_worker", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def _run_worker(self, session_id: str, cmd: List[str], cwd: Optional[str]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, cmd: List[str], cwd: Optional[str])", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "request_stop", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def request_stop(self, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str)", "scope": "RobotRunner", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/execution-session-management-api-691-700/backend_api/app/robot_runner.py", "pattern": "/^    def start($/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "( self, session_id: str, *, project: str, tests_root: str, test_name: Optional[str] = None, test_cases: Optional[List[str]] = None, config_folder: Optional[str] = None, extra_args: Optional[Dict] = None, )", "scope": "RobotRunner", "scopeKind": "class"}], "hash": "6fb83fc1808417a5a8ae603dce7e2e1c", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/app/robot_runner.py"}